!function(e){function t(){function t(e){"remove"===e&&this.each(function(e,t){var n=r(t);n&&n.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(e,t){var n=tinymce.get(t.id.replace(/_parent$/,""));n&&n.remove()})}function i(e){var n,i=this;if(null!=e)t.call(i),i.each(function(t,n){var i;(i=tinymce.get(n.id))&&i.setContent(e)});else if(i.length>0&&(n=tinymce.get(i[0].id)))return n.getContent()}function r(e){var t=null;return e&&e.id&&a.tinymce&&(t=tinymce.get(e.id)),t}function c(e){return!!(e&&e.length&&a.tinymce&&e.is(":tinymce"))}var o={};e.each(["text","html","val"],function(t,a){var l=o[a]=e.fn[a],u="text"===a;e.fn[a]=function(t){var a=this;if(!c(a))return l.apply(a,arguments);if(t!==n)return i.call(a.filter(":tinymce"),t),l.apply(a.not(":tinymce"),arguments),a;var o="",s=arguments;return(u?a:a.eq(0)).each(function(t,n){var i=r(n);o+=i?u?i.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):i.getContent({save:!0}):l.apply(e(n),s)}),o}}),e.each(["append","prepend"],function(t,i){var a=o[i]=e.fn[i],l="prepend"===i;e.fn[i]=function(e){var t=this;return c(t)?e!==n?("string"==typeof e&&t.filter(":tinymce").each(function(t,n){var i=r(n);i&&i.setContent(l?e+i.getContent():i.getContent()+e)}),a.apply(t.not(":tinymce"),arguments),t):void 0:a.apply(t,arguments)}}),e.each(["remove","replaceWith","replaceAll","empty"],function(n,i){var r=o[i]=e.fn[i];e.fn[i]=function(){return t.call(this,i),r.apply(this,arguments)}}),o.attr=e.fn.attr,e.fn.attr=function(t,a){var l=this,u=arguments;if(!t||"value"!==t||!c(l))return o.attr.apply(l,u);if(a!==n)return i.call(l.filter(":tinymce"),a),o.attr.apply(l.not(":tinymce"),u),l;var s=l[0],f=r(s);return f?f.getContent({save:!0}):o.attr.apply(e(s),u)}}var n,i,r,c=[],a=window;e.fn.tinymce=function(n){function o(){var i=[],c=0;r||(t(),r=!0),f.each(function(e,t){var r,a=t.id,o=n.oninit;a||(t.id=a=tinymce.DOM.uniqueId()),tinymce.get(a)||(r=new tinymce.Editor(a,n,tinymce.EditorManager),i.push(r),r.on("init",function(){var e,t=o;f.css("visibility",""),o&&++c==i.length&&("string"==typeof t&&(e=-1===t.indexOf(".")?null:tinymce.resolve(t.replace(/\.\w+$/,"")),t=tinymce.resolve(t)),t.apply(e||tinymce,i))}))}),e.each(i,function(e,t){t.render()})}var l,u,s,f=this,p="";if(!f.length)return f;if(!n)return window.tinymce?tinymce.get(f[0].id):null;if(f.css("visibility","hidden"),a.tinymce||i||!(l=n.script_url))1===i?c.push(o):o();else{i=1,u=l.substring(0,l.lastIndexOf("/")),-1!=l.indexOf(".min")&&(p=".min"),a.tinymce=a.tinyMCEPreInit||{base:u,suffix:p},-1!=l.indexOf("gzip")&&(s=n.language||"en",l=l+(/\?/.test(l)?"&":"?")+"js=true&core=true&suffix="+escape(p)+"&themes="+escape(n.theme||"modern")+"&plugins="+escape(n.plugins||"")+"&languages="+(s||""),a.tinyMCE_GZ||(a.tinyMCE_GZ={start:function(){function t(e){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(e))}t("langs/"+s+".js"),t("themes/"+n.theme+"/theme"+p+".js"),t("themes/"+n.theme+"/langs/"+s+".js"),e.each(n.plugins.split(","),function(e,n){n&&(t("plugins/"+n+"/plugin"+p+".js"),t("plugins/"+n+"/langs/"+s+".js"))})},end:function(){}}));var m=document.createElement("script");m.type="text/javascript",m.onload=m.onreadystatechange=function(t){t=t||window.event,2===i||"load"!=t.type&&!/complete|loaded/.test(m.readyState)||(tinymce.dom.Event.domLoaded=1,i=2,n.script_loaded&&n.script_loaded(),o(),e.each(c,function(e,t){t()}))},m.src=l,document.body.appendChild(m)}return f},e.extend(e.expr[":"],{tinymce:function(e){var t;return!!(e.id&&"tinymce"in window&&(t=tinymce.get(e.id))&&t.editorManager===tinymce)}})}(jQuery);