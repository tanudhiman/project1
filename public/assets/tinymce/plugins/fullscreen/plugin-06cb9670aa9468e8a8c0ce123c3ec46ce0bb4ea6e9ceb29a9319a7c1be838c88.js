tinymce.PluginManager.add("fullscreen",function(e){function t(){var e,t,n=window,i=document,c=i.body;return c.offsetWidth&&(e=c.offsetWidth,t=c.offsetHeight),n.innerWidth&&n.innerHeight&&(e=n.innerWidth,t=n.innerHeight),{w:e,h:t}}function n(){var e=tinymce.DOM.getViewPort();return{x:e.x,y:e.y}}function i(e){scrollTo(e.x,e.y)}function c(){function c(){a.setStyle(g,"height",t().h-(m.clientHeight-g.clientHeight))}var f,m,g,C,w=document.body,v=document.documentElement;h=!h,m=e.getContainer(),f=m.style,g=e.getContentAreaContainer().firstChild,C=g.style,h?(d=n(),l=C.width,r=C.height,C.width=C.height="100%",s=f.width,u=f.height,f.width=f.height="",a.addClass(w,"mce-fullscreen"),a.addClass(v,"mce-fullscreen"),a.addClass(m,"mce-fullscreen"),a.bind(window,"resize",c),c(),o=c):(C.width=l,C.height=r,s&&(f.width=s),u&&(f.height=u),a.removeClass(w,"mce-fullscreen"),a.removeClass(v,"mce-fullscreen"),a.removeClass(m,"mce-fullscreen"),a.unbind(window,"resize",o),i(d)),e.fire("FullscreenStateChanged",{state:h})}var l,r,o,s,u,d,h=!1,a=tinymce.DOM;if(!e.settings.inline)return e.on("init",function(){e.addShortcut("Ctrl+Shift+F","",c)}),e.on("remove",function(){o&&a.unbind(window,"resize",o)}),e.addCommand("mceFullScreen",c),e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,onClick:function(){c(),e.focus()},onPostRender:function(){var t=this;e.on("FullscreenStateChanged",function(e){t.active(e.state)})},context:"view"}),e.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Ctrl+Shift+F",onClick:c,onPostRender:function(){var t=this;e.on("FullscreenStateChanged",function(e){t.active(e.state)})}}),{isFullscreen:function(){return h}}});