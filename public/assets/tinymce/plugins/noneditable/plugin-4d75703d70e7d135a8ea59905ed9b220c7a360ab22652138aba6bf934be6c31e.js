tinymce.PluginManager.add("noneditable",function(t){function e(t){return function(e){return-1!==(" "+e.attr("class")+" ").indexOf(t)}}function n(e){function n(e){var n=arguments,a=n[n.length-2],r=a>0?o.charAt(a-1):"";if('"'===r)return e;if(">"===r){var i=o.lastIndexOf("<",a);if(-1!==i){if(-1!==o.substring(i,a).indexOf('contenteditable="false"'))return e}}return'<span class="'+c+'" data-mce-content="'+t.dom.encode(n[0])+'">'+t.dom.encode("string"==typeof n[1]?n[1]:n[0])+"</span>"}var a=i.length,o=e.content,c=tinymce.trim(r);if("raw"!=e.format){for(;a--;)o=o.replace(i[a],n);e.content=o}}var a,r,i,o="contenteditable";a=" "+tinymce.trim(t.getParam("noneditable_editable_class","mceEditable"))+" ",r=" "+tinymce.trim(t.getParam("noneditable_noneditable_class","mceNonEditable"))+" ";var c=e(a),l=e(r);i=t.getParam("noneditable_regexp"),i&&!i.length&&(i=[i]),t.on("PreInit",function(){i&&t.on("BeforeSetContent",n),t.parser.addAttributeFilter("class",function(t){for(var e,n=t.length;n--;)e=t[n],c(e)?e.attr(o,"true"):l(e)&&e.attr(o,"false")}),t.serializer.addAttributeFilter(o,function(t){for(var e,n=t.length;n--;)e=t[n],(c(e)||l(e))&&(i&&e.attr("data-mce-content")?(e.name="#text",e.type=3,e.raw=!0,e.value=e.attr("data-mce-content")):e.attr(o,null))})})});