!function(){var e={},t=function(t){for(var n=e[t],i=n.deps,o=n.defn,a=i.length,s=new Array(a),d=0;d<a;++d)s[d]=r(i[d]);var l=o.apply(null,s);if(void 0===l)throw"module ["+t+"] returned undefined";n.instance=l},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},i=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;++o)i.push(r(e[o]));t.apply(null,t)};({}).bolt={module:{api:{define:n,require:i,demand:r}}};var o=n,a=function(e,t){o(e,[],function(){return t})};a("1",tinymce.PluginManager),a("2",tinymce.util.Tools),a("3",tinymce.util.VK),o("4",[],function(){var e=function(e){return e&&3===e.nodeType},t=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},n=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},r=function(e){return e&&"BR"===e.nodeName};return{isTextNode:e,isListNode:t,isListItemNode:n,isBr:r,isFirstChild:function(e){return e.parentNode.firstChild===e},isLastChild:function(e){return e.parentNode.lastChild===e},isTextBlock:function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},isBogusBr:function(e,t){return!!r(t)&&!(!e.isBlock(t.nextSibling)||r(t.previousSibling))},isEmpty:function(e,t,n){var r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},isChildOfBody:function(e,t){return e.isChildOf(t,e.getRoot())}}}),a("9",tinymce.dom.TreeWalker),a("a",tinymce.dom.RangeUtils),o("b",["2","4"],function(e,t){return{getSelectedListItems:function(n){return e.grep(n.selection.getSelectedBlocks(),function(e){return t.isListItemNode(e)})}}}),a("h",tinymce.dom.DOMUtils.DOM),o("d",["a","4"],function(e,t){var n=function(n,r){var i=e.getNode(n,r);if(t.isListItemNode(n)&&t.isTextNode(i)){return{container:i,offset:r>=n.childNodes.length?i.data.length:0}}return{container:n,offset:r}};return{getNormalizedEndPoint:n,normalizeRange:function(e){var t=e.cloneRange(),r=n(e.startContainer,e.startOffset);t.setStart(r.container,r.offset);var i=n(e.endContainer,e.endOffset);return t.setEnd(i.container,i.offset),t}}}),o("c",["h","4","d"],function(e,t,n){var r=function(t){var n={},r=function(r){var i,o,a;o=t[r?"startContainer":"endContainer"],a=t[r?"startOffset":"endOffset"],1===o.nodeType&&(i=e.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(a=Math.min(a,o.childNodes.length-1),r?o.insertBefore(i,o.childNodes[a]):e.insertAfter(i,o.childNodes[a])):o.appendChild(i),o=i,a=0),n[r?"startContainer":"endContainer"]=o,n[r?"startOffset":"endOffset"]=a};return r(!0),t.collapsed||r(),n},i=function(t){function r(n){var r,i,o,a=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1};r=o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],r&&(1===r.nodeType&&(i=a(r),r=r.parentNode,e.remove(o)),t[n?"startContainer":"endContainer"]=r,t[n?"startOffset":"endOffset"]=i)}r(!0),r();var i=e.createRng();return i.setStart(t.startContainer,t.startOffset),t.endContainer&&i.setEnd(t.endContainer,t.endOffset),n.normalizeRange(i)};return{createBookmark:r,resolveBookmark:i}}),o("e",["h","2","4"],function(e,t,n){var r=function(t,r){var i,o=r.parentNode;"LI"===o.nodeName&&o.firstChild===r&&(i=o.previousSibling,i&&"LI"===i.nodeName?(i.appendChild(r),n.isEmpty(t,o)&&e.remove(o)):e.setStyle(o,"listStyleType","none")),n.isListNode(o)&&(i=o.previousSibling)&&"LI"===i.nodeName&&i.appendChild(r)};return{normalizeList:r,normalizeLists:function(e,n){t.each(t.grep(e.select("ol,ul",n)),function(t){r(e,t)})}}}),a("f",tinymce.dom.BookmarkManager),a("j",tinymce.Env),o("i",["h","j"],function(e,t){return{createNewTextBlock:function(n,r,i){var o,a,s,d=e.createFragment(),l=n.schema.getBlockElements();if(n.settings.forced_root_block&&(i=i||n.settings.forced_root_block),i&&(a=e.create(i),a.tagName===n.settings.forced_root_block&&e.setAttribs(a,n.settings.forced_root_block_attrs),d.appendChild(a)),r)for(;o=r.firstChild;){var c=o.nodeName;s||"SPAN"===c&&"bookmark"===o.getAttribute("data-mce-type")||(s=!0),l[c]?(d.appendChild(o),a=null):i?(a||(a=e.create(i),d.appendChild(a)),a.appendChild(o)):d.appendChild(o)}return n.settings.forced_root_block?s||t.ie&&!(t.ie>10)||a.appendChild(e.create("br",{"data-mce-bogus":"1"})):d.appendChild(e.create("br")),d}}}),o("g",["h","2","i","4"],function(e,t,n,r){return{splitList:function(i,o,a,s){var d,l,c,f,u=function(n){t.each(c,function(e){n.parentNode.insertBefore(e,a.parentNode)}),e.remove(n)};for(c=e.select('span[data-mce-type="bookmark"]',o),s=s||n.createNewTextBlock(i,a),d=e.createRng(),d.setStartAfter(a),d.setEndAfter(o),l=d.extractContents(),f=l.firstChild;f;f=f.firstChild)if("LI"===f.nodeName&&i.dom.isEmpty(f)){e.remove(f);break}i.dom.isEmpty(l)||e.insertAfter(l,o),e.insertAfter(s,o),r.isEmpty(i.dom,a.parentNode)&&u(a.parentNode),e.remove(a),r.isEmpty(i.dom,o)&&e.remove(o)}}}),o("7",["h","4","c","b","g","e","i"],function(e,t,n,r,i,o,a){var s=function(n,r){t.isEmpty(n,r)&&e.remove(r)},d=function(n,r){var d,l=r.parentNode,c=l.parentNode;return!(l!==n.getBody()&&("DD"===r.nodeName?(e.rename(r,"DT"),0):t.isFirstChild(r)&&t.isLastChild(r)?("LI"===c.nodeName?(e.insertAfter(r,c),s(n.dom,c),e.remove(l)):t.isListNode(c)?e.remove(l,!0):(c.insertBefore(a.createNewTextBlock(n,r),l),e.remove(l)),0):t.isFirstChild(r)?("LI"===c.nodeName?(e.insertAfter(r,c),r.appendChild(l),s(n.dom,c)):t.isListNode(c)?c.insertBefore(r,l):(c.insertBefore(a.createNewTextBlock(n,r),l),e.remove(r)),0):t.isLastChild(r)?("LI"===c.nodeName?e.insertAfter(r,c):t.isListNode(c)?e.insertAfter(r,l):(e.insertAfter(a.createNewTextBlock(n,r),l),e.remove(r)),0):("LI"===c.nodeName?(l=c,d=a.createNewTextBlock(n,r,"LI")):d=t.isListNode(c)?a.createNewTextBlock(n,r,"LI"):a.createNewTextBlock(n,r),i.splitList(n,l,r,d),o.normalizeLists(n.dom,l.parentNode),0)))};return{outdent:d,outdentSelection:function(e){var t=r.getSelectedListItems(e);if(t.length){var i,o,a=n.createBookmark(e.selection.getRng(!0)),s=e.getBody();for(i=t.length;i--;)for(var l=t[i].parentNode;l&&l!==s;){for(o=t.length;o--;)if(t[o]===l){t.splice(i,1);break}l=l.parentNode}for(i=0;i<t.length&&(d(e,t[i])||0!==i);i++);return e.selection.setRng(n.resolveBookmark(a)),e.nodeChanged(),!0}}}}),o("8",["2","f","b","4","c","g","e","7"],function(e,t,n,r,i,o,a,s){var d=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},l=function(t,n){e.each(n,function(e,n){t.setAttribute(n,e)})},c=function(t,n,r){l(n,r["list-attributes"]),e.each(t.select("li",n),function(e){l(e,r["list-item-attributes"])})},f=function(e,t,n){d(e,t,n),c(e,t,n)},u=function(e,t,n){var i,o,a=e.getBody();for(i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1===i.nodeType&&(i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i);i.parentNode!==a;){if(r.isTextBlock(e,i))return i;if(/^(TD|TH)$/.test(i.parentNode.nodeName))return i;i=i.parentNode}return i},m=function(n,i){for(var o,a=[],s=n.getBody(),d=n.dom,l=u(n,i,!0),c=u(n,i,!1),f=[],m=l;m&&(f.push(m),m!==c);m=m.nextSibling);return e.each(f,function(e){if(r.isTextBlock(n,e))return a.push(e),void(o=null);if(d.isBlock(e)||r.isBr(e))return r.isBr(e)&&d.remove(e),void(o=null);var i=e.nextSibling;return t.isBookmarkNode(e)&&(r.isTextBlock(n,i)||!i&&e.parentNode===s)?void(o=null):(o||(o=d.create("p"),e.parentNode.insertBefore(o,e),a.push(o)),void o.appendChild(e))}),a},p=function(t,n,o){var a,s=t.selection.getRng(!0),d="LI",l=t.dom;o=o||{},"false"!==l.getContentEditable(t.selection.getNode())&&(n=n.toUpperCase(),"DL"===n&&(d="DT"),a=i.createBookmark(s),e.each(m(t,s),function(e){var i,a,s=function(e){var t=l.getStyle(e,"list-style-type"),n=o?o["list-style-type"]:"";return n=null===n?"":n,t===n};a=e.previousSibling,a&&r.isListNode(a)&&a.nodeName===n&&s(a)?(i=a,e=l.rename(e,d),a.appendChild(e)):(i=l.create(n),e.parentNode.insertBefore(i,e),i.appendChild(e),e=l.rename(e,d)),f(l,i,o),C(t.dom,i)}),t.selection.setRng(i.resolveBookmark(a)))},g=function(t){var d=i.createBookmark(t.selection.getRng(!0)),l=t.getBody(),c=n.getSelectedListItems(t),f=e.grep(c,function(e){return t.dom.isEmpty(e)});c=e.grep(c,function(e){return!t.dom.isEmpty(e)}),e.each(f,function(e){if(r.isEmpty(t.dom,e))return void s.outdent(t,e)}),e.each(c,function(e){var n,i;if(e.parentNode!==t.getBody()){for(n=e;n&&n!==l;n=n.parentNode)r.isListNode(n)&&(i=n);o.splitList(t,i,e),a.normalizeLists(t.dom,i.parentNode)}}),t.selection.setRng(i.resolveBookmark(d))},h=function(e,t){return e&&t&&r.isListNode(e)&&e.nodeName===t.nodeName},v=function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)},N=function(e,t){return e.className===t.className},y=function(e,t,n){return h(t,n)&&v(e,t,n)&&N(t,n)},C=function(e,t){var n,r;if(n=t.nextSibling,y(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,y(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}};return{toggleList:function(e,t,n){var r=e.dom.getParent(e.selection.getStart(),"OL,UL,DL");if(n=n||{},r!==e.getBody())if(r)if(r.nodeName===t)g(e,t);else{var o=i.createBookmark(e.selection.getRng(!0));f(e.dom,r,n),C(e.dom,e.dom.rename(r,t)),e.selection.setRng(i.resolveBookmark(o))}else p(e,t,n)},removeList:g,mergeWithAdjacentLists:C}}),o("5",["9","a","3","b","4","c","d","e","8"],function(e,t,n,r,i,o,a,s,d){var l=function(n,r,o){var a,s,d=r.startContainer,l=r.startOffset;if(3===d.nodeType&&(o?l<d.data.length:l>0))return d;for(a=n.schema.getNonEmptyElements(),1===d.nodeType&&(d=t.getNode(d,l)),s=new e(d,n.getBody()),o&&i.isBogusBr(n.dom,d)&&s.next();d=s[o?"next":"prev2"]();){if("LI"===d.nodeName&&!d.hasChildNodes())return d;if(a[d.nodeName])return d;if(3===d.nodeType&&d.data.length>0)return d}},c=function(e,t,n){var r,o,a=t.parentNode;if(i.isChildOfBody(e,t)&&i.isChildOfBody(e,n)){if(i.isListNode(n.lastChild)&&(o=n.lastChild),a===n.lastChild&&i.isBr(a.previousSibling)&&e.remove(a.previousSibling),r=n.lastChild,r&&i.isBr(r)&&t.hasChildNodes()&&e.remove(r),i.isEmpty(e,n,!0)&&e.$(n).empty(),!i.isEmpty(e,t,!0))for(;r=t.firstChild;)n.appendChild(r);o&&n.appendChild(o),e.remove(t),i.isEmpty(e,a)&&a!==e.getRoot()&&e.remove(a)}},f=function(e,t){var n,r,s,f=e.dom,u=e.selection,m=f.getParent(u.getStart(),"LI");if(m){if((n=m.parentNode)===e.getBody()&&i.isEmpty(f,n))return!0;if(r=a.normalizeRange(u.getRng(!0)),(s=f.getParent(l(e,r,t),"LI"))&&s!==m){var p=o.createBookmark(r);return t?c(f,s,m):c(f,m,s),e.selection.setRng(o.resolveBookmark(p)),!0}if(!s&&!t&&d.removeList(e,n.nodeName))return!0}return!1},u=function(e,t){var n=e.dom,r=n.getParent(e.selection.getStart(),n.isBlock);if(r&&n.isEmpty(r)){var i=a.normalizeRange(e.selection.getRng(!0)),o=n.getParent(l(e,i,t),"LI");if(o)return e.undoManager.transact(function(){n.remove(r),d.mergeWithAdjacentLists(n,o.parentNode),e.selection.select(o,!0),e.selection.collapse(t)}),!0}return!1},m=function(e,t){return f(e,t)||u(e,t)},p=function(e){return!!(e.dom.getParent(e.selection.getStart(),"LI,DT,DD")||r.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),s.normalizeLists(e.dom,e.getBody())}),!0)},g=function(e,t){return e.selection.isCollapsed()?m(e,t):p(e)};return{setup:function(e){e.on("keydown",function(t){t.keyCode===n.BACKSPACE?g(e,!1)&&t.preventDefault():t.keyCode===n.DELETE&&g(e,!0)&&t.preventDefault()})},backspaceDelete:g}}),o("6",["h","4","c","b"],function(e,t,n,r){var i=function(n,r){var i;if(t.isListNode(n)){for(;i=n.firstChild;)r.appendChild(i);e.remove(n)}},o=function(n){var r,o,a;return"DT"===n.nodeName?(e.rename(n,"DD"),!0):(r=n.previousSibling,r&&t.isListNode(r)?(r.appendChild(n),!0):r&&"LI"===r.nodeName&&t.isListNode(r.lastChild)?(r.lastChild.appendChild(n),i(n.lastChild,r.lastChild),!0):(r=n.nextSibling,r&&t.isListNode(r)?(r.insertBefore(n,r.firstChild),!0):!(!(r=n.previousSibling)||"LI"!==r.nodeName||(o=e.create(n.parentNode.nodeName),a=e.getStyle(n.parentNode,"listStyleType"),a&&e.setStyle(o,"listStyleType",a),r.appendChild(o),o.appendChild(n),i(n.lastChild,o),0))))};return{indentSelection:function(e){var t=r.getSelectedListItems(e);if(t.length){for(var i=n.createBookmark(e.selection.getRng(!0)),a=0;a<t.length&&(o(t[a])||0!==a);a++);return e.selection.setRng(n.resolveBookmark(i)),e.nodeChanged(),!0}}}}),o("0",["1","2","3","4","5","6","7","8"],function(e,t,n,r,i,o,a,s){var d=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},l=function(e){e.on("BeforeExecCommand",function(t){var n,r=t.command.toLowerCase();if("indent"===r?o.indentSelection(e)&&(n=!0):"outdent"===r&&a.outdentSelection(e)&&(n=!0),n)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0}),e.addCommand("InsertUnorderedList",function(t,n){s.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){s.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){s.toggleList(e,"DL",n)})},c=function(e){e.addQueryStateHandler("InsertUnorderedList",d(e,"UL")),e.addQueryStateHandler("InsertOrderedList",d(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",d(e,"DL"))},f=function(e){e.on("keydown",function(t){9!==t.keyCode||n.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?a.outdentSelection(e):o.indentSelection(e))})},u=function(e){var n=function(n){return function(){var i=this;e.on("NodeChange",function(e){var o=t.grep(e.parents,r.isListNode);i.active(o.length>0&&o[0].nodeName===n)})}};(function(e,n){var r=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(r.split(/[ ,]/),n)})(e,"advlist")||(e.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:n("OL")}),e.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:n("UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(t){var n=t.control;e.on("nodechange",function(){for(var t=e.selection.getSelectedBlocks(),i=!1,o=0,a=t.length;!i&&o<a;o++){var s=t[o].nodeName;i="LI"===s&&r.isFirstChild(t[o])||"UL"===s||"OL"===s||"DD"===s}n.disabled(i)})}})};return e.add("lists",function(e){return u(e),i.setup(e),e.on("init",function(){l(e),c(e),f(e)}),{backspaceDelete:function(t){i.backspaceDelete(e,t)}}}),function(){}}),r("0")()}();